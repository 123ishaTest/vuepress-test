<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <title>Gaining Bananas | Incremental Game Template</title><meta name="description" content="A collection of useful scripts to help you develop incremental games">
    <link rel="preload" href="/vuepress-test/assets/js/runtime~app.d5d9cf3d.js" as="script"><link rel="preload" href="/vuepress-test/assets/css/styles.1190e0d9.css" as="style"><link rel="preload" href="/vuepress-test/assets/js/812.a4a4ef2a.js" as="script"><link rel="preload" href="/vuepress-test/assets/js/app.de795202.js" as="script">
    <link rel="stylesheet" href="/vuepress-test/assets/css/styles.1190e0d9.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-test/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="Incremental Game Template"><span class="site-name can-hide">Incremental Game Template</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/vuepress-test/docs/introduction/introduction/" class="nav-link" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vuepress-test/demo/introduction" class="nav-link" aria-label="Tutorial"><!--[--><!--]--> Tutorial <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/vuepress-test/docs/introduction/introduction/" class="nav-link" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vuepress-test/demo/introduction" class="nav-link" aria-label="Tutorial"><!--[--><!--]--> Tutorial <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Let&#39;s go bananas</p><ul class=""><li><!--[--><a href="/vuepress-test/demo/introduction.html" class="nav-link sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vuepress-test/demo/setting-up.html" class="nav-link sidebar-item" aria-label="Setting Up"><!--[--><!--]--> Setting Up <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vuepress-test/demo/project-structure.html" class="nav-link sidebar-item" aria-label="Project Structure"><!--[--><!--]--> Project Structure <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vuepress-test/demo/first-changes.html" class="nav-link sidebar-item" aria-label="First Changes"><!--[--><!--]--> First Changes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vuepress-test/demo/adding-the-wallet.html" class="nav-link sidebar-item" aria-label="Adding the IgtWallet"><!--[--><!--]--> Adding the IgtWallet <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vuepress-test/demo/gaining-bananas.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Gaining Bananas"><!--[--><!--]--> Gaining Bananas <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="gaining-bananas" tabindex="-1"><a class="header-anchor" href="#gaining-bananas" aria-hidden="true">#</a> Gaining Bananas</h1><p>Let&#39;s gain some bananas! We will create a new Feature that generates 1 banana per second. If you think that is too little, don&#39;t worry! We will also add an <code>Upgrade</code> that allows us to level up our gains.</p><p>Before we get into coding, it is a good idea to think about the dependencies this feature will have. It will need to depend on the wallet which is responsible for keeping track of how many bananas we have. This dependency can be injected in the <code>initialize(features: MyFeatures)</code> method of a <code>Feature</code>, which is what we&#39;ll do!</p><h2 id="create-a-bananaproducer-feature" tabindex="-1"><a class="header-anchor" href="#create-a-bananaproducer-feature" aria-hidden="true">#</a> Create a BananaProducer feature</h2><p>Make a new file <code>src/my-game/features/banana-producer/BananaProducer.ts</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span>Currency<span class="token punctuation">,</span> IgtFeature<span class="token punctuation">,</span> IgtWallet<span class="token punctuation">,</span> SaveData<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;incremental-game-template&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span>CurrencyType<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/my-game/features/wallet/CurrencyType&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span>MyFeatures<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/my-game/MyFeatures&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span>
<span class="token operator">+</span><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BananaProducer</span> <span class="token keyword">extends</span> <span class="token class-name">IgtFeature</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token comment">// Declare the attribute. It is undefined for now but we can promise TypeScript it will be initialized in the initialize()</span>
<span class="token operator">+</span>    <span class="token keyword">private</span> _wallet<span class="token operator">:</span> IgtWallet <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> IgtWallet<span class="token punctuation">;</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token comment">// The saveKey for this feature</span>
<span class="token operator">+</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">&#39;banana&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token comment">// Inject the wallet so we can refer to it later</span>
<span class="token operator">+</span>    <span class="token function">initialize</span><span class="token punctuation">(</span>features<span class="token operator">:</span> MyFeatures<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_wallet <span class="token operator">=</span> features<span class="token punctuation">.</span>wallet<span class="token punctuation">;</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token comment">// This method is called every tick, delta is the time elapsed since last tick</span>
<span class="token operator">+</span>    <span class="token function">update</span><span class="token punctuation">(</span>delta<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token keyword">const</span> bananasToGain <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span>        <span class="token keyword">const</span> currency <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Currency</span><span class="token punctuation">(</span>bananasToGain <span class="token operator">*</span> delta<span class="token punctuation">,</span> CurrencyType<span class="token punctuation">.</span>banana<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_wallet<span class="token punctuation">.</span><span class="token function">gainCurrency</span><span class="token punctuation">(</span>currency<span class="token punctuation">)</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token function">load</span><span class="token punctuation">(</span>data<span class="token operator">:</span> SaveData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token comment">// Empty</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>
<span class="token operator">+</span>    <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> SaveData <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>
<span class="token operator">+</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>Note that when a game is started, first the constructor is called, then initialize, then update. If you have attributes that depend on other features, you need to initialize them in the <code>initialize()</code>.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The syntax <code>private _wallet: IgtWallet = undefined as unknown as IgtWallet;</code> is not great. But it works without needing complicated Dependency Injection tools. If you know a better way, let me know!</p></div><p>Don&#39;t forget to add the Feature to our <code>App</code> and <code>MyFeatures.ts</code>:</p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token coord">--- a/src/App.ts</span>
<span class="token coord">+++ b/src/App.ts</span>
<span class="token coord">@@ -1,6 +1,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import {MyGame} from &quot;./my-game/MyGame&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import {IgtSettings, IgtWallet} from &quot;incremental-game-template&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import {CurrencyType} from &quot;@/my-game/features/wallet/CurrencyType&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import {BananaProducer} from &quot;@/my-game/features/banana-producer/BananaProducer&quot;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export class App {
</span><span class="token prefix unchanged"> </span><span class="token line">    static inProduction: boolean = (process.env.NODE_ENV === &quot;production&quot;);
</span></span>@@ -19,6 +20,7 @@ export class App {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">            {
</span><span class="token prefix unchanged"> </span><span class="token line">                settings: new IgtSettings(),
</span><span class="token prefix unchanged"> </span><span class="token line">                wallet: new IgtWallet([CurrencyType.banana]),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">                bananaProducer: new BananaProducer(),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">            }
</span><span class="token prefix unchanged"> </span><span class="token line">        );
</span><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token coord">--- a/src/my-game/MyFeatures.ts</span>
<span class="token coord">+++ b/src/my-game/MyFeatures.ts</span>
<span class="token coord">@@ -1,5 +1,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import {IgtFeatures, IgtWallet} from &quot;incremental-game-template&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import {BananaProducer} from &quot;@/my-game/features/banana-producer/BananaProducer&quot;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export interface MyFeatures extends IgtFeatures {
</span><span class="token prefix unchanged"> </span><span class="token line">    wallet: IgtWallet;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    bananaProducer: BananaProducer;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>If we refresh our browser, we can now see the banana count go up!</p><p>The save and load methods are empty for now, but we&#39;ll use them later to save our upgrades bought.</p><h2 id="adding-an-upgrade" tabindex="-1"><a class="header-anchor" href="#adding-an-upgrade" aria-hidden="true">#</a> Adding an upgrade</h2><p>We are clearly not getting enough bananas per second, so it is time to add an Upgrade. Upgrades are a bit complex. They need access to the wallet to know if they can be bought. Since Features aren&#39;t globally accessible, we will have to complicate our implementation a bit.</p><p>Luckily the <code>igt-library</code> provides a mixin called AddWallet. When we apply this mixin, it provides the private <code>_wallet</code> and two method that allow the feature to buy upgrades <code>buyUpgrade(upgrade: IgtAbstractUpgrade)</code> and <code>canAfford(upgrade: IgtAbstractUpgrade)</code>.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>If you&#39;re not familiar with mixins, they are a nice way to share behaviour between classes without inheritance. https://www.typescriptlang.org/docs/handbook/mixins.html</p></div><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token coord">--- a/src/my-game/features/banana-producer/BananaProducer.ts</span>
<span class="token coord">+++ b/src/my-game/features/banana-producer/BananaProducer.ts</span>
<span class="token coord">@@ -1,15 +1,22 @@</span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import {Currency, IgtFeature, IgtWallet, SaveData} from &quot;incremental-game-template&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import {AddWallet, ContinuousUpgrade, Currency, IgtFeature, SaveData} from &quot;incremental-game-template&quot;;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import {CurrencyType} from &quot;@/my-game/features/wallet/CurrencyType&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import {MyFeatures} from &quot;@/my-game/MyFeatures&quot;;
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">export class BananaProducer extends IgtFeature {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">export class BananaProducer extends AddWallet(IgtFeature) {
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    // Declare the attribute. It is undefined for now but we can promise TypeScript it will be initialized in the initialize()
</span><span class="token prefix deleted">-</span><span class="token line">    private _wallet: IgtWallet = undefined as unknown as IgtWallet;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    monkeyUpgrade: ContinuousUpgrade;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    constructor() {
</span><span class="token prefix unchanged"> </span><span class="token line">        // The saveKey for this feature
</span><span class="token prefix unchanged"> </span><span class="token line">        super(&#39;banana&#39;);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        this.monkeyUpgrade = new ContinuousUpgrade(&#39;monkey&#39;, &#39;banana&#39;, &#39;Monkeys&#39;, 100,
</span><span class="token prefix inserted">+</span><span class="token line">            level =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">                return level + 1;
</span><span class="token prefix inserted">+</span><span class="token line">            },
</span><span class="token prefix inserted">+</span><span class="token line">            level =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">                return new Currency(20 * Math.pow(level + 1, 1.4), CurrencyType.banana);
</span><span class="token prefix inserted">+</span><span class="token line">            },
</span><span class="token prefix inserted">+</span><span class="token line">        )
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    // Inject the wallet so we can refer to it later
</span></span>@@ -19,7 +26,7 @@ export class BananaProducer extends IgtFeature {

<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    // This method is called every tick, delta is the time elapsed since last tick
</span><span class="token prefix unchanged"> </span><span class="token line">    update(delta: number) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">        const bananasToGain = 1;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        const bananasToGain = this.monkeyUpgrade.getBonus();
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">        const currency = new Currency(bananasToGain * delta, CurrencyType.banana);
</span><span class="token prefix unchanged"> </span><span class="token line">        this._wallet.gainCurrency(currency)
</span><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>The <code>igt-library</code> contains 2 types of upgrades: The <code>DiscreteUpgrade</code> and the <code>ContinuousUpgrade</code>. They are very similar, but the <code>DiscreteUpgrade</code> requires a list of costs and a list bonuses, while the <code>ContinuousUpgrade</code> requires 2 functions that return the cost and bonus per level. We use the following cost function, but feel free to tweak it to your liking.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>level <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Currency</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CurrencyType<span class="token punctuation">.</span>banana<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This works well, however we need to create a Vue component to actually render our feature and to allow for buying the upgrade!</p><h2 id="creating-a-new-vue-component" tabindex="-1"><a class="header-anchor" href="#creating-a-new-vue-component" aria-hidden="true">#</a> Creating a new Vue component</h2><p>We will use the <code>igt-upgrade</code> component to easily render our upgrade. We do need to bind the upgrade function ourselves, and tell the upgrade when it can be bought.</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>--- /dev/null
+++ b/src/components/features/banana-producer/banana-producer.vue
@@ -0,0 +1,35 @@
+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
+  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>igt-feature</span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>igt-upgrade</span>
<span class="token attr-name">+</span>        <span class="token attr-name">@click.native</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bananaProducerFeature.buyUpgrade(monkeyUpgrade)<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>        <span class="token attr-name">:upgrade</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>monkeyUpgrade<span class="token punctuation">&quot;</span></span>
<span class="token attr-name">+</span>        <span class="token attr-name">:can-buy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bananaProducerFeature.canAfford(monkeyUpgrade)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
+    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>igt-upgrade</span><span class="token punctuation">&gt;</span></span>
+  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>igt-feature</span><span class="token punctuation">&gt;</span></span>
+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
+
+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">+</span><span class="token keyword">import</span> IgtFeature <span class="token keyword">from</span> <span class="token string">&quot;@/components/util/igt-feature&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span>BananaProducer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/my-game/features/banana-producer/BananaProducer&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token keyword">import</span> IgtUpgrade <span class="token keyword">from</span> <span class="token string">&quot;@/components/tools/upgrades/igt-discrete-upgrade&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span>
<span class="token operator">+</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>  name<span class="token operator">:</span> <span class="token string">&quot;banana-producer&quot;</span><span class="token punctuation">,</span>
<span class="token operator">+</span>  components<span class="token operator">:</span> <span class="token punctuation">{</span>IgtUpgrade<span class="token punctuation">,</span> IgtFeature<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>  props<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>    bananaProducerFeature<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>      type<span class="token operator">:</span> BananaProducer<span class="token punctuation">,</span>
<span class="token operator">+</span>      required<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>    <span class="token function">monkeyUpgrade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bananaProducerFeature<span class="token punctuation">.</span>monkeyUpgrade<span class="token punctuation">;</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span>
<span class="token operator">+</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span><span class="token punctuation">}</span>
<span class="token operator">+</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
+
+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
+
+</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>And of course actually use it in our <code>VueApp.vue</code></p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token coord">--- a/src/VueApp.vue</span>
<span class="token coord">+++ b/src/VueApp.vue</span>
<span class="token coord">@@ -7,6 +7,7 @@</span>

<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">      &lt;igt-tab name=&quot;Main screen&quot; :selected=&quot;true&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">        &lt;igt-wallet :wallet-feature=&quot;game.features.wallet&quot;&gt;&lt;/igt-wallet&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;banana-producer :banana-producer-feature=&quot;game.features.bananaProducer&quot;&gt;&lt;/banana-producer&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">      &lt;/igt-tab&gt;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">      &lt;igt-tab name=&quot;Settings&quot;&gt;
</span></span>@@ -43,9 +44,11 @@ import IgtSidebarCategory from &quot;@/components/util/sidebar/igt-sidebar-category&quot;;
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import IgtSidebarExternalLink from &quot;@/components/util/sidebar/igt-sidebar-external-link&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import IgtSettings from &quot;@/components/features/settings/igt-settings&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import IgtWallet from &quot;@/components/features/wallet/igt-wallet&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import BananaProducer from &quot;@/components/features/banana-producer/banana-producer&quot;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export default {
</span><span class="token prefix unchanged"> </span><span class="token line">  components: {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    BananaProducer,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    IgtWallet,
</span><span class="token prefix unchanged"> </span><span class="token line">    IgtSettings,
</span><span class="token prefix unchanged"> </span><span class="token line">    IgtSidebarExternalLink,
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>And voilà, we have a working upgrade in our application!</p><p>You might have noticed however, that when we refresh, our upgrade level isn&#39;t saved. Our banana count is saved however, the <code>IgtWallet</code> automatically saves any currencies you store in it!</p><p>But let&#39;s implement saving for our upgrade.</p><h2 id="saving-and-loading" tabindex="-1"><a class="header-anchor" href="#saving-and-loading" aria-hidden="true">#</a> Saving and Loading</h2><p>The base class <code>IgtFeature</code> we&#39;re extending from implements an interface called <code>Saveable</code>. This interface requires us to implement a save and load method with this signature:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Saveable</span> <span class="token punctuation">{</span>
    saveKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> SaveData<span class="token punctuation">;</span>
    <span class="token function">load</span><span class="token punctuation">(</span>data<span class="token operator">:</span> SaveData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Where <code>SaveData</code> is an empty interface we&#39;ll be extending. Currently, our BananaProducer only needs to save the level of our upgrade, so that&#39;s all we need to add to our <code>BananaProducerSaveData.ts</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span>
<span class="token operator">++</span><span class="token operator">+</span> b<span class="token operator">/</span>src<span class="token operator">/</span>my<span class="token operator">-</span>game<span class="token operator">/</span>features<span class="token operator">/</span>banana<span class="token operator">-</span>producer<span class="token operator">/</span>BananaProducerSaveData<span class="token punctuation">.</span>ts
@@ <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span> @@
<span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span>SaveData<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;incremental-game-template&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span>
<span class="token operator">+</span><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">BananaProducerSaveData</span> <span class="token keyword">extends</span> <span class="token class-name">SaveData</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>    monkeyLevel<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The <code>save()</code> and <code>load()</code> methods are automatically called by the <code>IgtGame</code>, so all we need to do is implement their functionality.</p><div class="language-diff ext-diff line-numbers-mode"><pre class="language-diff"><code><span class="token coord">--- a/src/my-game/features/banana-producer/BananaProducer.ts</span>
<span class="token coord">+++ b/src/my-game/features/banana-producer/BananaProducer.ts</span>
<span class="token coord">@@ -1,6 +1,7 @@</span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">import {AddWallet, ContinuousUpgrade, Currency, IgtFeature, SaveData} from &quot;incremental-game-template&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import {AddWallet, ContinuousUpgrade, Currency, IgtFeature} from &quot;incremental-game-template&quot;;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">import {CurrencyType} from &quot;@/my-game/features/wallet/CurrencyType&quot;;
</span><span class="token prefix unchanged"> </span><span class="token line">import {MyFeatures} from &quot;@/my-game/MyFeatures&quot;;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import {BananaProducerSaveData} from &quot;@/my-game/features/banana-producer/BananaProducerSaveData&quot;;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">export class BananaProducer extends AddWallet(IgtFeature) {
</span></span>
@@ -31,12 +32,14 @@ export class BananaProducer extends AddWallet(IgtFeature) {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">        this._wallet.gainCurrency(currency)
</span><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    load(data: SaveData): void {
</span><span class="token prefix deleted">-</span><span class="token line">        // Empty
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    load(data: BananaProducerSaveData): void {
</span><span class="token prefix inserted">+</span><span class="token line">        this.monkeyUpgrade.level = data.monkeyLevel ?? 0;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span>
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    save(): SaveData {
</span><span class="token prefix deleted">-</span><span class="token line">        return {};
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    save(): BananaProducerSaveData {
</span><span class="token prefix inserted">+</span><span class="token line">        return {
</span><span class="token prefix inserted">+</span><span class="token line">            monkeyLevel: this.monkeyUpgrade.level,
</span><span class="token prefix inserted">+</span><span class="token line">        };
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">    }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">}
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>The default save time is 30s, if you think this is too low, you can override it in <code>MyGame.ts</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">protected</span> <span class="token keyword">readonly</span> <span class="token constant">SAVE_INTERVAL</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>When loading, it is possible for data to not exist because a save is older. It is a good idea to add sensible defaults like 0 for the upgrade level.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>monkeyUpgrade<span class="token punctuation">.</span>level <span class="token operator">=</span> data<span class="token punctuation">.</span>monkeyLevel <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><p>If you open the localStorage tab in your browser, you can confirm the data is saved correctly: <img src="/vuepress-test/assets/img/localstorage-save-object.63203e9b.png" alt="LocalStorage"></p><p>Congratulations, you have just created your first <code>Feature</code> with the Incremental Game Template!</p><p>If you have any feedback on this tutorial, please <a href="https://discord.gg/AvNpq6Ng6S" target="_blank" rel="noopener noreferrer">let me know<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>!</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>In the future more tutorial stuff will be added, stay tuned!</p></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">10/7/2021, 11:51:54 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ishadijcks@gmail.com">Isha</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/vuepress-test/demo/adding-the-wallet.html" class="nav-link" aria-label="Adding the IgtWallet"><!--[--><!--]--> Adding the IgtWallet <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/vuepress-test/assets/js/runtime~app.d5d9cf3d.js" defer></script><script src="/vuepress-test/assets/js/812.a4a4ef2a.js" defer></script><script src="/vuepress-test/assets/js/app.de795202.js" defer></script>
  </body>
</html>
